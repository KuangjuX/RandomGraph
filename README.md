# RandomGraph
算法设计与分析作业：随机图生成

## 算法描述
随机图可用于模拟一个网络。我们考虑包含“优先待遇”的随机图，即一个新的节点更可能与已经有很多连接的节点连接。如果把互联网看作一个图，这表示每个网页更可能链接已经有很多链接的网页。实现以下算法产生随机图：
- 首先构造𝑚0个节点，并把它们连成一个环。
- 重复𝑡次：添加一个新的节点，随机构造𝑚条边连接新节点与已有的节点。每个已有节点被选择的概率与它已有几条边成比例。

## 算法实现描述
随机图算法使用 C++ 语言实现，具体实现代码在 `src/` 目录下。图是基于邻接表实现的，在 `Graph` 中存储了所有的节点，在 `Node` 中使用 `next` 代表下一个连接的节点，node 和 next 之间连接构成一条边。

`void Graph<GNode>::generateRandomGraph(int m, int t)` 实现了生成随机图的算法，根据给定的迭代次数进行遍历并生成一个节点，随后调用 `selectNode` 在原图中的节点中选择一个并连接成一条边，如果选择的节点是自己或者边已经存在则重新选择。

`uint64_t Graph<GNode>::dijkstra(uint64_t src, uint64_t dst)` 实现了 dijkstra 算法求单源最短路。

在项目中也提供了 tests 和 examples 以验证正确性和性能，代码在 `tests/` 和 `examples` 目录下。

## 使用
在项目中提供了 `Makefile` 以及 `CMakeList.txt` 以帮助运行和测试，执行 `make test` 进行正确性验证，执行 `make example EXAMPLE=graph_example DEBUG=Y` 进行简单的验证。执行 `bash ./perf.sh` 去运行性能测试。

## 实验结果
### 性能测试结果
| 迭代次数 | 随机图生成时间(s) | 单源最短路查找平均时间(ms) |
|---------|---------|---------|
| 1000 | 0.051289 | 0.506055 |       
| 10000 | 4.567229 | 6.0518271 |
| 100000 | 531.67984       |  87.341214       |

其中单源最短路进行 1000 次迭代并随机生成源节点以及目标节点并求平均值。
